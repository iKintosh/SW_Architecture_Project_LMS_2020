# LMS

LMS (англ. _learning management system_) — [система управления обучением].

В качестве финального проекта по курсу [PPPoSD] вам предстоит разработать модельную версию LMS для вузов.

[PPPoSD]: (https://khashaev.ru/courses/ppposd
[система управления обучением]: https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BE%D0%B1%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC

## Техническое задание

### §1. Административная часть

Для административной части не требуется наличие публичного интерфейса. Иными словами, для простоты мы будем считать, что сценарии использования системы администратором подразумевают прямое подключение к базе данных и редактирование имеющихся таблиц соответствующим образом.

#### §1.1. Создание учебной группы

Администратор может создать учебную группу, указав следующие данные:

- Имя группы
- Имя факультета
- Номер курса

#### §1.2. Создание учебного курса

Администратор может создать учебный курс, указав его название и текстовое описание.

##### §1.2.1. Запись группы на курс

Администратор может добавить учебную группу, которая проходит данный курс.

##### §1.2.2. Добавление преподавателя курса

Администратор может добавить преподавателя курса.

#### §1.3. Предварительная регистрация

Администратор может добавить предопределенного пользователя (студента или преподавателя) в систему, указав следующие обязательные данные:

- ФИО
- Только для студентов:
  - Учебная группа
  - Год поступления
  - Степень
  - Форма обучения
  - Основа обучения

Подразумевается следующее:
- Учебная группа у каждого студента ровно одна.
- Степени: бакалавр, специалист, магистр.
- Формы обучения: очная, заочная, вечерняя.
- Основа обучения: контрактная, бюджетная.

Для каждого пользователя также случайным образом генерируется верификационный код, позволяющий данному пользователю в дальнейшем зарегистрироваться в системе.

### §2. Публичное API

Необходимо реализовать RPC или HTTP API для клиентского ПО пользователей системы — студентов и преподавателей.

- В случае разработки RPC API, предварительно согласуйте RPC-фреймворк через форму обратной связи.
- В случае разработки HTTP API, необходимо достичь как минимум 2-го уровня согласно [модели зрелости Ричардсона].

[модели зрелости Ричардсона]: https://martinfowler.com/articles/richardsonMaturityModel.html

#### §2.1. Аутентификация

Пользователь может войти в систему по своему e-mail и паролю.

#### §2.2. Регистрация

Пользователь может зарегистрироваться в системе по коду регистрации, полученного от администратора. При регистрации пользователь указывает свой e-mail и пароль. Пароль должен быть достаточно безопасным.

#### §2.3. Просмотр и редактирование профиля

Пользователь может просмотреть и отредактировать свой профиль, в котором может содержаться следующая информация:

- Личная информация:
  - ФИО (не редактируемо)
  - E-mail (не редактируемо)
  - Телефон
  - Родной город
  - Информация о себе в текстовой форме
- Ссылки на профили в социальных сетях:
  - VK
  - Facebook
  - LinkedIn
  - Instagram
- Информация о получаемом образовании (не редактируемо, см. §1.3)

Пользователь также может сменить свой пароль, если знает старый.

Также предполагается следующее:
- Телефон должен соответствовать российскому формату (`+7 ...`)
- Ссылки на профили в социальных сетях должны соответстовать формату. Например, в случае VK ссылка должна начинаться на `https://vk.com/`.

#### §2.4. Просмотр профилей

Помимо своего личного профиля, пользователь также может просматривать профили других пользователей системы (если есть на него ссылка или идентификатор пользователя). Однако, основу обучения видеть другие пользователи не могут.

#### §2.5. Просмотр списка одногруппников

Студент может просматривать список своих одногруппников.

#### §2.6. Просмотр списка курсов

Пользователь может просматривать список своих курсов. Список курсов, на которые записан студент, определяется согласно его учебной группе. Список курсов, которые ведет преподаватель, определяется на основе информации §1.2.2.

#### §2.7. Просмотр курса

Пользователь может посмотреть информацию про любой курс:

- Название
- Описание
- Список ведущих курс преподавателей
- Список доверенных лиц
- Материалы курса
- Доступные домашние задания

#### §2.8. Управление материалами курса

Преподаватель курса и доверенные лица могут добавлять, модифицировать и удалять материалы курса.

Для простоты будем считать, что материал по курсу состоит из:
- Имени материала
- Текстового содержимого
- Даты добавления

#### §2.9. Управление доверенными лицами

Преподаватель может выбрать (как добавить, так и удалить) студентов, имеющих доступ к управлению материалами его курса, из списка слушающих курс студентов.

Доверенные лица («старосты») могут добавлять, модифицировать и удалять материалы курса наравне с преподавателем.

Доверенные лица не могут:
- управлять домашними заданиями и скачивать посылки других студентов
- добавлять других доверенных лиц

#### §2.10. Управление домашними заданиями курса

Преподаватель курса может добавить, модифицировать и удалить домашнее задание курса.

Домашнее задание состоит из:
- Названия
- Интервала времени сдачи
- Текстового описания задания

Предполагается, что студенты не видят домашнего задания до наступления времени сдачи и не могут сдать задание после его истечения.

#### §2.11. Загрузка решения домашнего задания

Студент, записанный на курс, может загрузить решение домашнего задания в течение интервала времени сдачи. Новая посылка решения отменяет предыдущую посылку. Для простоты будем считать, что решение задачи является обычным текстом.

#### §2.12. Просмотр решений домашнего задания

Преподаватель курса для каждого домашнего задания может просматривать список студентов, записанных на курс, сгруппированный по учебным группам, при этом для каждого студента известно, что он либо не отправлял решения, либо что он отправил решение в некоторое время. Также можно посмотреть текст отдельного решения.

## Нефункциональные требования

### Чеклист

- [ ] Использование системы контроля версий.
- [ ] Аккуратное оформление коммит-сообщений согласно правилам из презентации.
- [ ] Временные файлы проигнорированы с помощью `.gitignore`, в том числе файлы IDE.
- [ ] `README.md`, из которого понятно следующее:
  - название ПО, краткое описание, авторы;
  - как установить и запустить сервис;
  - как запустить тесты.
- [ ] Любая открытая лицензия, размещенная в файле `LICENSE`.
- [ ] Декларация сборки и зависимостей.
- [ ] Статический анализ стиля кодирования.
- [ ] Модульные тесты.
- [ ] Настроена непрерывная интеграция (например, с помощью [Travis]).
- [ ] Настроено измерение покрытия кода (например, с помощью [CodeCov]).
- [ ] Использование реляционной СУБД (например, SQLite, PostgreSQL, MySQL и прочие).
- [ ] Сервис должен удовлетворять условиям масштабируемости из соответствующей лекции.
- [ ] Архитектура сервиса должна быть многоуровневой.

Штрафные баллы полагаются за ненадежный или ошибочный код, плохо расширяемую или немасштабируемую архитектуру, запахи кода, использование антипаттернов и так далее.

Бонусные баллы за:
- [ ] Документацию к API — например, с помощью OpenAPI/Swagger.
- [ ] Документирующие комментарии — хотя бы для некоторого подмножества кодовой базы, например, для модели предметной области.
- [ ] API в архитектурном стиле REST.

[Travis]: https://travis-ci.org/
[CodeCov]: https://codecov.io/

## Многоуровневая архитектура

### Требования

- Должны быть явным образом выделены как минимум три уровня:
  - уровень предметной области;
  - уровень инфраструктуры;
  - уровень представления.
- Не должно быть зависимостей между уровнями, которых не было обозначено в презентации, например, когда уровень предметной области зависит от инфраструктуры.
- В частности, это означает, что вы не можете использовать ORM, которые требуют наличия жесткой зависимости сущностей предметной области от используемой ORM.

### Пример возможной структуры проекта

Это пример принятого студенческого решения:

<img src="https://i.imgur.com/SMeAEdp.png" width="200" alt="Пример возможной структуры проекта" />

На картинке есть некоторые лишние детали, например, функциональность загрузки файлов и подсчета рейтинга, не обращайте на них внимания.

- Уровень представления:
  - `Elms.Api` — сервис, обслуживающий HTTP API.
  - `Elms.Api.Dto` — [объекты передачи данных](https://martinfowler.com/eaaCatalog/dataTransferObject.html) для API.
- Уровень предметной области:
  - `Elms.Domain`.
- Уровень инфраструктуры:
  - `Elms.Domain.Migrations` — миграции БД.
  - `Elms.Domain.NHibernate` — реализация persistence с помощью NHibernate.
  
## Демонстрация

Вы должны предоставить seed-данные БД для тестирования.

Там должны присутствовать как минимум:
- Несколько предварительно зарегистрированных пользователей (студентов и преподавателей)
- Несколько зарегистрированных пользователей (студентов и преподавателей)
- Несколько курсов, которые ведут какие-то преподаватели и слушают какие-то группы студентов, из которых выбраны какие-то доверенные лица
- Внутри этих курсов: выбрано доверенное лицо, несколько материалов, несколько домашних заданий, несколько решений домашних заданий.

Бонусные баллы, если сервис будет развернут где-нибудь в Интернете публично.

## Оценивание

Оценка за проект складывается из следующих составляющих:

- 40% — реализация функциональности.
- 40% — удовлетворение нефункциональным требованиям.
- 20% — субъективные впечатления о качестве и архитектуре кода.

По усмотрению преподавателя возможно также выставление бонусных баллов за особо красивые и качественные реализации, архитектурные находки, уместное применение нужных паттернов, аккуратность и так далее.

## Правила выполнения

Разрешено реализовывать проект группами до 2-х человек при условии равноправной доли участия и понимания проекта каждым участником в целом. Равноправное участие должно должным образом прослеживаться по коммитам в репозитории. Если вы выполняете проект в группе, напишите об этом с указанием фамилии партнера при отправке ссылки на репозиторий.

## FAQ

##### У меня есть идея другого проекта, можно ли реализовать его вместо LMS?

Можно, так скорее всего даже будет полезнее для вас. Для этого необходимо:

- Убедиться, что ваш проект является сходным по сложности, и что нефункциональные требования могут быть удовлетворены в таком же объеме.
- Согласовать идею проекта через форму обратной связи на сайте курса.
- Описать техническое задание на разработку с уровнем детализации не хуже, чем в данном документе.
- Согласовать данное описание через форму обратной связи.

##### А если этот другой проект уже написан?

Так тоже можно. Только учтите, что нефункциональным требованиям все равно придется соответствовать.

##### Я вообще никогда не разрабатывал веб-приложения и сервисы, что-то писать умею только на Python, что делать?

Посмотрите на [Flask](http://flask.pocoo.org), погуглите туториалы. Если вы делаете проект вдвоем, попробуйте спросить совета у более опытного товарища.

##### А где почитать про REST?

Навскидку несколько ссылок:

- [REST Cookbook](http://restcookbook.com/).
- [RESTful Web APIs](http://shop.oreilly.com/product/0636920028468.do) by Leonard Richardson, Sam Ruby, Mike Amundsen, 2013.
- [Диссертация Роя Филдинга](https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf) для любителей толстых первоисточников.

##### Можно ли вместо реляционной СУБД использовать документо-ориентированные и прочие?

Можно, если ваш выбор является осознанным техническим решением, а вы в достаточном объеме знакомы с критикой и особенностями NoSQL, чтобы такое решение принять. В любом случае, помните, что серебрянных пуль нет, а требование по созданию многоуровневой архитектуры никуда не девается.

## История правок

- 23 сентября 2019 — первоначальная версия.
